syntax = "proto3";
package music;

option go_package = "github.com/Dev-Siri/wavelength/server/proto/music;musicpb";

import "proto/common.proto";

service MusicService {
  rpc LikeTrack(LikeTrackRequest) returns (LikeTrackResponse);
  rpc IsTrackLiked(IsTrackLikedRequest) returns (IsTrackLikedResponse);
  rpc GetLikedTrackCount(GetLikedTrackCountRequest) returns (GetLikedTrackCountResponse);
  rpc GetLikedTracksLength(GetLikedTracksLengthRequest) returns (GetLikedTracksLengthResponse);
  rpc GetLikedTracks(GetLikedTracksRequest) returns (GetLikedTracksResponse);
  rpc GetMusicSearchSuggestions(GetMusicSearchSuggestionsRequest) returns (GetMusicSearchSuggestionsResponse);
  rpc GetQuickPicks(GetQuickPicksRequest) returns (GetQuickPicksResponse);
  rpc GetMusicDuration(GetMusicDurationRequest) returns (GetMusicDurationResponse);
  rpc GetMusicTrackStats(GetMusicTrackStatsRequest) returns (GetMusicTrackStatsResponse);
  rpc GetMusicVideoId(GetMusicVideoIdRequest) returns (GetMusicVideoIdResponse);
  rpc SearchMusicTracks(SearchMusicTracksRequest) returns (SearchMusicTracksResponse);
  rpc SearchYouTubeVideos(SearchYouTubeVideosRequest) returns (SearchYouTubeVideosResponse);
  rpc GetMusicLyrics(GetMusicLyricsRequest) returns (GetMusicLyricsResponse);
}

message LikeTrackRequest {
  repeated common.EmbeddedArtist artists = 1;
  string thumbnail = 2;
  string duration = 3;
  bool is_explicit = 4;
  string title = 5;
  common.VideoType video_type = 7;
  string liker_email = 9;
  string video_id = 10;
  optional common.EmbeddedAlbum album = 11;
}

message LikeTrackResponse {
  enum LikeType {
    LIKE_TYPE_UNSPECIFIED = 0;
    LIKE_TYPE_UNLIKE = 1;
    LIKE_TYPE_LIKE = 2;
  }
  LikeType like_type = 1;
}

message GetMusicSearchSuggestionsRequest {
  string query = 1;
}

message GetMusicSearchSuggestionsResponse {
  message SearchSuggestedLink {
    message SearchSuggestedLinkMeta {
      string type = 1;
      string author_or_album = 2;
      string plays_or_album_release = 3;
    }

    SearchSuggestedLinkMeta meta = 1;
    string thumbnail = 2;
    string title = 3;
    string subtitle = 4;
    string browse_id = 5;
    string type = 7;
  }

  repeated string matching_queries = 1;
  repeated SearchSuggestedLink matching_links = 2;
}

message IsTrackLikedRequest {
  string liker_email = 1;
  string video_id = 2;
}

message IsTrackLikedResponse {
  optional bool is_liked = 1;
}

message GetLikedTrackCountRequest {
  string liker_email = 1;
}

message GetLikedTrackCountResponse {
  uint32 like_count = 1; 
}

message GetLikedTracksLengthRequest {
  string liker_email = 1;
}

message GetLikedTracksLengthResponse {
  common.TracksLength liked_tracks_length = 1;
}

message GetLikedTracksRequest {
  string liker_email = 1;
}

message GetLikedTracksResponse {
  repeated common.LikedTrack liked_tracks = 1;
}

message GetQuickPicksRequest {
  string gl = 1;
}

message GetQuickPicksResponse {
  repeated common.QuickPick quick_picks = 1;
}

message GetMusicDurationRequest {
  string video_id = 1;
}

message GetMusicDurationResponse {
  uint32 duration_seconds = 1;
}

message GetMusicTrackStatsRequest {
  string video_id = 1;
}

message GetMusicTrackStatsResponse {
  common.MusicTrackStats music_track_stats = 1;
}

message SearchYouTubeVideosRequest {
  string query = 1;
}

message SearchYouTubeVideosResponse {
  repeated common.YouTubeVideo youtube_videos = 1;
}

message GetMusicVideoIdRequest {
  string title = 1;
  string artist = 2;
}

message GetMusicVideoIdResponse {
  string video_id = 1;
}

message SearchMusicTracksRequest {
  string query = 1;
}

message SearchMusicTracksResponse {
  repeated common.Track tracks = 1;
}

message GetMusicLyricsRequest {
  string title = 1;
  string artist = 2;
}

message GetMusicLyricsResponse {
  repeated common.Lyric lyrics = 1;
}
